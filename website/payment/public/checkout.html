<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <title>Accept a payment</title>
  <meta name="description" content="A demo of a payment on Stripe" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="checkout.css" />
  <!-- Vue 3 -->
  <script src='https://cdn.jsdelivr.net/npm/vue@3.0.2/dist/vue.global.js'></script>
  <!-- Vue 3: production version, optimized for size and speed -->
  <!-- <script src='https://cdn.jsdelivr.net/npm/vue@3.0.2/dist/vue.global.prod.js'></script> -->
  <script src="https://js.stripe.com/v3/"></script>
  <script src="checkout.js" defer></script>
</head>

<body>

  <div id='app' class='container-fluid'>
    <!-- Display a payment form -->
    <form id="payment-form">
      <div id="payment-element">
        <!--Stripe.js injects the Payment Element-->
      </div>
      <button id="submit">
        <div class="spinner hidden" id="spinner"></div>
        <span id="button-text" @click="getCart()" >Pay now</span>
      </button>
      <div id="payment-message" class="hidden"></div>

    <div id="app"> </div>

    </form>
  </div>

</body>

</html>

<script>

  const app = Vue.createApp({
    data() {
      return {
        name: '',
      }
    },
    methods: {
      getCart() {
        let cart = sessionStorage.getItem('cart');
        console.log(cart)
        alert{'Order Successful'}

        // this.createOrder(cart)

      },

      createOrder(cart) {
        const response =
          fetch(`http://localhost:5100/place_an_order`, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify({
              
              
            })
          })
          .then(response => response.json())
          .then(data => {
            console.log(data)
          })
      }


    },
    created() {
      this.getCart()
    }
  })
  const vm = app.mount('#app')
</script>
